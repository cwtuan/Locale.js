var Locale=function(){function n(n){this.langUrls=n}function t(n){var t,e;if(this.map[n]){if(t=[],1==arguments.length)return this.map[n];for(e=1;e<arguments.length;e++)t.push(arguments[e]);return this.map[n].replace(/\{(\d+)\}/g,function(n,e){return t[e]})}return n+".UNDEFINED"}function e(n){this.lang=n}function r(n){u("lang",n)}function i(n){return null!==this.map[n]}function o(){s(!1)}function a(n){s(!0,n)}function s(n,t){var e,r,i,o,a,s,u,l=this;for(this.map={},options=options||{},e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status)for(lines=e.responseText.split(/\r\n|\r|\n/g),r=0;r<lines.length;++r)i=lines[r].indexOf("="),o=lines[r].substr(0,i),a=lines[r].substr(i+1),o&&a&&(a=a.replace(/\r/g,"").replace(/\n/g,""),l.map[o]=a);n&&t()},s=g.call(this),r=0,len=this.langUrls.length;len>r;r++)if(-1!==this.langUrls[r].indexOf(s)){u=this.langUrls[r];break}u=u||l.langUrls[0],e.open("GET",l.langUrls[0]+"?"+h(),n),e.send()}function u(n,t){document.cookie=n+"="+encodeURIComponent(t)}function l(n){for(var t,e=n+"=",r=0,i=0;r<document.cookie.length;){if(i=r+e.length,document.cookie.substring(r,i)===e)return c.call(this,i);if(t=document.cookie.indexOf(" ",r),-1===t)return null;r=1+t}return null}function c(n){var t=document.cookie.indexOf(";",n);return-1==t&&(t=document.cookie.length),encodeURIComponent(document.cookie.substring(n,t))}function g(){var n=this.lang||d(location.search,"lang")||l("lang")||f();return p(n)}function f(){return navigator.language||navigator.browserLanguage||navigator.userLanguage}function h(){return"_rand="+(new Date).getTime()}function p(n){return n=n.split("_"),1==n.length&&(n=n[0].split("-")),n[0].toLowerCase()+"_"+n[1].toUpperCase()}function d(n,t){var e,r,i;if(n=location.search.split("?")[1],n&&(e=n.split("&")))for(r=0;r<e.length;++r)if(i=e[r].split("="),i[0]===t)return i[1];return null}var m={setLanguageUrls:n,getMsg:t,useLanguage:e,saveLanguage:r,hasKey:i,loadSync:o,loadAsync:a};return m}();