var Locale=function(){"use strict";function n(n){this.langUrls=n}function t(n){var t,e;if(this.map[n]){if(t=[],1==arguments.length)return this.map[n];for(e=1;e<arguments.length;e++)t.push(arguments[e]);return this.map[n].replace(/\{(\d+)\}/g,function(n,e){return t[e]})}return n+".UNDEFINED"}function e(n){this.lang=n}function r(n){s("lang",n)}function a(n){return null!==this.map[n]}function o(){u.call(this,!1)}function i(n){u.call(this,!0,n)}function u(n,t){var e,r,a,o,i,u,s,l,c,f=this;for(this.map={},this.langUrls||console.error("You should call setLanguageUrls() before loading lagnuage file."),e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){for(r=e.responseText.split(/\r\n|\r|\n/g),a=0;a<r.length;++a)o=r[a].indexOf("="),i=r[a].substr(0,o),u=r[a].substr(o+1),i&&u&&(u=u.replace(/\r/g,"").replace(/\n/g,""),f.map[i]=u);n&&t()}},s=g.call(this),a=0,c=this.langUrls.length;c>a;a++)if(-1!==this.langUrls[a].indexOf(s)){l=this.langUrls[a];break}l=l||f.langUrls[0],e.open("GET",l+"?"+h(),n),e.send()}function s(n,t){document.cookie=n+"="+encodeURIComponent(t)}function l(n){for(var t,e=n+"=",r=0,a=0;r<document.cookie.length;){if(a=r+e.length,document.cookie.substring(r,a)===e)return c.call(this,a);if(t=document.cookie.indexOf(" ",r),-1===t)return null;r=1+t}return null}function c(n){var t=document.cookie.indexOf(";",n);return-1==t&&(t=document.cookie.length),encodeURIComponent(document.cookie.substring(n,t))}function g(){var n=this.lang||d(location.search,"lang")||l("lang")||f();return p(n)}function f(){return navigator.language||navigator.browserLanguage||navigator.userLanguage}function h(){return"_rand="+(new Date).getTime()}function p(n){return n=n.split("_"),1==n.length&&(n=n[0].split("-")),n[0].toLowerCase()+"_"+n[1].toUpperCase()}function d(n,t){var e,r,a;if(n=location.search.split("?")[1],n&&(e=n.split("&")))for(r=0;r<e.length;++r)if(a=e[r].split("="),a[0]===t)return a[1];return null}var m={setLanguageUrls:n,getMsg:t,useLanguage:e,saveLanguage:r,hasKey:a,loadSync:o,loadAsync:i};return m}();