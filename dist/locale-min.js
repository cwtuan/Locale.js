var Locale=function(){function n(n){this.langUrls=n}function e(n){var e,t;if(this.map[n]){if(e=[],1==arguments.length)return this.map[n];for(t=1;t<arguments.length;t++)e.push(arguments[t]);return this.map[n].replace(/\{(\d+)\}/g,function(n,t){return e[t]})}return n+".UNDEFINED"}function t(n){this.lang=n}function r(n){a("lang",n)}function i(n){return null!==this.map[n]}function o(){var n,e,t,r,i,o,a=this;for(this.map={},n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status)for(lines=n.responseText.split(/\r\n|\r|\n/g),e=0;e<lines.length;++e)t=lines[e].indexOf("="),r=lines[e].substr(0,t),i=lines[e].substr(t+1),r&&i&&(i=i.replace(/\r/g,"").replace(/\n/g,""),a.map[r]=i)},o=l.call(this),e=0,len=this.langUrls.length;len>e;e++)if(-1!==this.langUrls[e].indexOf(o))return n.open("GET",this.langUrls[e]+"?"+g(),!1),void n.send();n.open("GET",a.langUrls[0]+"?"+g(),!1),n.send()}function a(n,e){document.cookie=n+"="+encodeURIComponent(e)}function s(n){for(var e,t=n+"=",r=0,i=0;r<document.cookie.length;){if(i=r+t.length,document.cookie.substring(r,i)===t)return u.call(this,i);if(e=document.cookie.indexOf(" ",r),-1===e)return null;r=1+e}return null}function u(n){var e=document.cookie.indexOf(";",n);return-1==e&&(e=document.cookie.length),encodeURIComponent(document.cookie.substring(n,e))}function l(){var n=this.lang||h(location.search,"lang")||s("lang")||c();return f(n)}function c(){return navigator.language||navigator.browserLanguage||navigator.userLanguage}function g(){return"_rand="+(new Date).getTime()}function f(n){return n=n.split("_"),1==n.length&&(n=n[0].split("-")),n[0].toLowerCase()+"_"+n[1].toUpperCase()}function h(n,e){var t,r,i;if(n=location.search.split("?")[1],n&&(t=n.split("&")))for(r=0;r<t.length;++r)if(i=t[r].split("="),i[0]===e)return i[1];return null}var p={setLanguageUrls:n,getMsg:e,useLanguage:t,saveLanguage:r,hasKey:i,load:o};return p}();